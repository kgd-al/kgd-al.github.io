% Generic commands
\usepackage{draftcommands}

% Font encodings
\usepackage[T1]{fontenc}

% Sets margins
\usepackage[lmargin=1in,rmargin=1in,bmargin=1in,tmargin=.75in]{geometry}

% For hyperlinks, as usual
\usepackage{hyperref}

% The list of publications (with links)
\usepackage[backend=biber, maxbibnames=99, doi=true, url=true, sorting=ydnt, giveninits=true, defernumbers=true]{biblatex}
\addbibresource{cv.bib}

% Only use url if doi is not present
\DeclareSourcemap{
  \maps[datatype=bibtex]{
    \map[overwrite]{
      \step[fieldsource=doi, final]
      \step[fieldset=url, null]
      \step[fieldset=eprint, null]
    }  
  }
}

% Bold name (just for me)
\def\firstname{Kevin}
\def\firstinit{K.}
\def\birthname{Dubois}
\def\lastname{Godin-Dubois}
\newcommand{\ifme}[1]{
  \ifboolexpr{ ( test {\ifdefequal{\firstname}{\namepartgiven}} or test {\ifdefequal{\firstinit}{\namepartgiven}} ) and ( test {\ifdefequal{\lastname}{\namepartfamily}} or test {\ifdefequal{\birthname}{\namepartfamily}} ) }
  {\mkbibbold{#1}}{#1}%
}
\renewcommand{\mkbibnamegiven}[1]{\ifme{#1}}
\renewcommand{\mkbibnamefamily}[1]{\ifme{#1}}

% Multiple language

% \providecommand{\kgdlang}{french}
\providecommand{\kgdlang}{english}
\usepackage[french,english,main=\kgdlang]{babel}
\usepackage{csquotes}
\usepackage{iflang}

\def\En#1{#1}
\def\Fr#1{}
\IfLanguageName{french}{%
 \def\En#1{}\def\Fr#1{#1}
 \usepackage[T1]{fontenc}
}{}

% Classification CNU 27

% Ouvrages
% Conférences invitées internationales
% Conférences invitées nationales

% Revues internationales avec comité de lecture
% Revues nationales avec comité de lecture
\def\publijournal{
    \En{Journals}%
    \Fr{Journaux Internationaux}%
    \ (peer-reviewed)}

% Chapitres de livre avec comité de lecture
% Direction d’ouvrages, de revues, actes
% Conférences internationales avec comité de lecture
% Conférences nationales avec comité de lecture
\def\publiconference{
    \En{International conferences}%
    \Fr{Conf\'erences Internationales}%
    \ (peer-reviewed)}

% Workshops/ateliers internationaux avec comité de lecture
% Workshops/ateliers nationaux avec comité de lecture
\def\publiworkshop{
    \En{Workshops}%
    \Fr{Workshops}}

\def\publiposter{
    \En{Posters}%
    \Fr{Posters}}

\def\publitalk{
    \En{Oral presentations}%
    \Fr{Pr\'esentations orales}}

% Séminaires invités
% Démonstrations
% Conférences sans comité de lecture
% Brevets, productions logicielles, mise à disposition de données.
\def\publisoftware{
    \En{Softwares and datasets}%
    \Fr{Logiciels, mise à disposition de données}}

% Autres (rapports, expertises, etc)
\def\publithesis{
  \En{Thesis}%
  \Fr{Th\`ese}}
  
\input{_bibliography_sections}

\newcommand\sectionedbibliography{
 \nocite{*}

 % More breathing room
 \emergencystretch=1em

 \foreach \subtype/\text in \publiclasses {
  \section*{\text}
  \printbibliography[heading=none, subtype=\subtype]
 }
}
